<div class="recipes-grid" *ngIf="recipes.length > 0; else noRecipes">
  <div *ngFor="let recipe of recipes" class="recipe-card">
    <div class="card-header">
      <h3 class="recipe-name">{{ recipe.name }}</h3>
      <span class="meal-type-badge">{{ getMealTimeLabel(recipe.mealTime) }}</span>
    </div>

    <div class="card-meta">
      <div class="meta-item">
        <span class="icon-circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#ff6b35" d="M256 0a256 256 0 1 1 0 512 256 256 0 1 1 0-512zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/></svg></span>
        {{ recipe.prepTime }} min
      </div>
      <div class="meta-item">
        <span class="icon-circle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#ff6b35" d="M64 128a112 112 0 1 1 224 0 112 112 0 1 1 -224 0zM0 464c0-97.2 78.8-176 176-176s176 78.8 176 176l0 6c0 23.2-18.8 42-42 42L42 512c-23.2 0-42-18.8-42-42l0-6zM432 64a96 96 0 1 1 0 192 96 96 0 1 1 0-192zm0 240c79.5 0 144 64.5 144 144l0 22.4c0 23-18.6 41.6-41.6 41.6l-144.8 0c6.6-12.5 10.4-26.8 10.4-42l0-6c0-51.5-17.4-98.9-46.5-136.7 22.6-14.7 49.6-23.3 78.5-23.3z"/></svg></span>
        {{ recipe.servings }} porciones
      </div>
    </div>

    <div class="ingredients-preview">
      <div class="ingredients-header">
        Ingredientes ({{ recipe.ingredients.length }})
      </div>
      <div class="ingredients-list">
        @for (ingredient of recipe.ingredients; track ingredient.name) {
          <span class="ingredient-tag" *ngIf="getIngredientPreviewIndex(ingredient, recipe) < 3">
            {{ ingredient.name }}
          </span>
        }
        @if (recipe.ingredients.length > 3) {
          <span class="more-items">y {{ recipe.ingredients.length - 3 }} más...</span>
        }
      </div>
    </div>

    <div class="card-actions">
      <button class="action-btn edit-btn" mat-raised-button (click)="onEdit(recipe)" matTooltip="Editar">
        <mat-icon>edit</mat-icon>
        Editar
      </button>
      <button class="action-btn delete-btn" mat-raised-button color="warn" (click)="onDelete(recipe.id!)" matTooltip="Eliminar">
        <mat-icon>delete</mat-icon>
        Eliminar
      </button>
    </div>
  </div>
</div>

<ng-template #noRecipes>
  <div class="no-recipes">
    <mat-icon>restaurant_menu</mat-icon>
    <p>No hay recetas disponibles. ¡Agrega una nueva! o Recarga la página con F5</p>
  </div>
</ng-template>